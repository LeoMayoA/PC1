@{
    ViewData["Title"] = "Home Page";
}

<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Pago con Tarjeta</title>
  </head>
  <body>
    <h1>Pago con Tarjeta</h1>
    <form>
      <label for="numero_tarjeta">Número de Tarjeta:</label>
      <input type="text" id="numero_tarjeta" name="numero_tarjeta" required>

      <label for="fecha_pago">Fecha de Pago:</label>
      <input type="date" id="fecha_pago" name="fecha_pago" required>

      <label for="monto">Monto:</label>
      <input type="number" id="monto" name="monto" required>

      <label for="monto_con_mora">Monto con Mora:</label>
      <input type="text" id="monto_con_mora" name="monto_con_mora" readonly>

      <input type="button" value="Calcular Mora" onclick="calcularMora()">
    </form>

    <script>
      function calcularMora() {
        const monto = parseFloat(document.getElementById("monto").value);
        const diasAtraso = calcularDiasAtraso();
        const mora = (monto * 0.05 * diasAtraso).toFixed(2);
        const montoConMora = (monto + parseFloat(mora)).toFixed(2);
        document.getElementById("monto_con_mora").value = montoConMora;
      }

      function calcularDiasAtraso() {
        const fechaPago = new Date(document.getElementById("fecha_pago").value);
        const hoy = new Date();
        const unDiaEnMs = 1000 * 60 * 60 * 24;
        const diasAtraso = Math.max(Math.round((hoy - fechaPago) / unDiaEnMs), 0);
        return diasAtraso;
      }
    </script>
  </body>
</html>
